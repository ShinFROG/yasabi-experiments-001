<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ランダム数字生成</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Noto Sans JP', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 400px;
      width: 100%;
    }

    h1 {
      font-size: 1.5rem;
      color: #333;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 30px;
    }

    .number-display {
      font-size: 8rem;
      font-weight: bold;
      color: #667eea;
      line-height: 1;
      margin: 30px 0;
      min-height: 130px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .number-display.spinning {
      animation: pulse 0.1s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .generate-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 18px 50px;
      font-size: 1.2rem;
      border-radius: 50px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin-bottom: 20px;
    }

    .generate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }

    .generate-btn:active {
      transform: translateY(0);
    }

    .generate-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .instruction {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    .instruction p {
      font-size: 0.95rem;
      color: #555;
      line-height: 1.6;
    }

    .instruction strong {
      color: #667eea;
    }

    .result-box {
      display: none;
      background: #e8f5e9;
      border: 2px solid #4caf50;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    .result-box.show {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-box p {
      font-size: 1.1rem;
      color: #2e7d32;
      font-weight: bold;
    }

    .back-link {
      display: inline-block;
      margin-top: 20px;
      color: #667eea;
      text-decoration: none;
      font-size: 0.9rem;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    /* スマートフォン対応 */
    @media (max-width: 480px) {
      .container {
        padding: 30px 20px;
      }

      h1 {
        font-size: 1.3rem;
      }

      .number-display {
        font-size: 6rem;
        min-height: 100px;
      }

      .generate-btn {
        padding: 15px 40px;
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ランダム数字生成</h1>
    <p class="subtitle">アンケート条件割当用</p>

    <div class="number-display" id="numberDisplay">?</div>

    <button class="generate-btn" id="generateBtn" onclick="generateNumber()">
      数字を生成する
    </button>

    <div class="instruction">
      <p>
        上のボタンをタップすると<br>
        <strong>0〜99</strong>の数字がランダムに表示されます．<br><br>
        表示された数字を覚えて，<br>
        アンケートに戻って入力してください．
      </p>
    </div>

    <div class="result-box" id="resultBox">
      <p>あなたの数字は <span id="resultNumber"></span> です</p>
      <p id="conditionText" style="font-size: 1rem; font-weight: bold; margin-top: 15px; color: #667eea;"></p>
      <p style="font-size: 0.9rem; font-weight: normal; margin-top: 10px; color: #555;">
        この数字をアンケート画面で入力してください
      </p>
    </div>
  </div>

  <script>
    let isSpinning = false;

    // 条件の定義
    const conditions = {
      0: '条件0（本人回答）',
      1: '条件1（標準AI）',
      2: '条件2（システムプロンプティングAI）',
      3: '条件3（ファインチューニングAI）'
    };

    function generateNumber() {
      if (isSpinning) return;

      isSpinning = true;
      const display = document.getElementById('numberDisplay');
      const btn = document.getElementById('generateBtn');
      const resultBox = document.getElementById('resultBox');
      const resultNumber = document.getElementById('resultNumber');
      const conditionText = document.getElementById('conditionText');

      btn.disabled = true;
      display.classList.add('spinning');
      resultBox.classList.remove('show');

      // アニメーション：数字をランダムに切り替え
      let count = 0;
      const maxCount = 20;
      const interval = setInterval(() => {
        display.textContent = Math.floor(Math.random() * 100);
        count++;

        if (count >= maxCount) {
          clearInterval(interval);

          // 最終的な数字を決定（0〜99）
          const finalNumber = Math.floor(Math.random() * 100);
          display.textContent = finalNumber;
          display.classList.remove('spinning');

          // 4で割った余りで条件を決定
          const conditionId = finalNumber % 4;

          // 結果表示
          resultNumber.textContent = finalNumber;
          conditionText.textContent = `${finalNumber} ÷ 4 = ${Math.floor(finalNumber / 4)} あまり ${conditionId} → ${conditions[conditionId]}`;
          resultBox.classList.add('show');

          btn.disabled = false;
          btn.textContent = 'もう一度生成する';
          isSpinning = false;
        }
      }, 80);
    }

    // ページ読み込み時に自動生成（オプション）
    // window.onload = generateNumber;
  </script>
</body>
</html>
